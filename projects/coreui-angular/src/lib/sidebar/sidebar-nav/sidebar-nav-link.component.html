@let linkItem = item() ?? {};

@switch (linkType) {
  @case ('disabled') {
    <a [cHtmlAttr]="linkItem.attributes ?? {}" [ngClass]="linkItem | cSidebarNavLink">
      <ng-container *ngTemplateOutlet="iconTemplate; context: {$implicit: linkItem}" />
      <c-sidebar-nav-link-content [item]="linkItem" />
      @if (linkItem.badge) {
        <span [ngClass]="linkItem | cSidebarNavBadge">{{ linkItem.badge?.text }}</span>
      }
    </a>
  }
  @case ('external') {
    <a (click)="linkClicked()" [cHtmlAttr]="linkItem.attributes ?? {}" [href]="href" [ngClass]="linkItem | cSidebarNavLink">
      <ng-container *ngTemplateOutlet="iconTemplate; context: {$implicit: linkItem}" />
      <c-sidebar-nav-link-content [item]="linkItem" />
      @if (linkItem.badge) {
        <span [ngClass]="linkItem | cSidebarNavBadge">{{ linkItem.badge?.text }}</span>
      }
    </a>
  }
  @default {
    <a (click)="linkClicked()"
       [cHtmlAttr]="linkItem.attributes ?? {}"
       [fragment]="linkItem.linkProps?.fragment"
       [ngClass]="linkItem | cSidebarNavLink"
       [preserveFragment]="linkItem.linkProps?.preserveFragment ?? false"
       [queryParamsHandling]="linkItem.linkProps?.queryParamsHandling"
       [queryParams]="linkItem.linkProps?.queryParams ?? null"
       [replaceUrl]="linkItem.linkProps?.replaceUrl ?? false"
       [routerLinkActiveOptions]="linkItem.linkProps?.routerLinkActiveOptions ?? { exact: false }"
       [routerLink]="linkItem.url"
       [skipLocationChange]="linkItem.linkProps?.skipLocationChange ?? false"
       [state]="linkItem.linkProps?.state ?? {}"
       [target]="linkItem.attributes?.['target']"
       routerLinkActive="active"
    >
      <!--    [class.active]="linkActive"-->
      <ng-container *ngTemplateOutlet="iconTemplate ; context: {$implicit: linkItem}" />
      <c-sidebar-nav-link-content [item]="linkItem" />
      @if (linkItem.badge) {
        <span [ngClass]="linkItem | cSidebarNavBadge">{{ linkItem.badge?.text }}</span>
      }
    </a>
  }
}
<ng-template #iconTemplate let-item>
  <!--  <i *ngIf="item?.icon" [ngClass]="item | cSidebarNavIcon"></i>-->
  @if (item?.icon) {
    <span class="nav-icon">
      <span [ngClass]="item.icon ?? ''"></span>
    </span>
  }
  @if (item?.iconComponent) {
    <svg
      [cIcon]="item.iconComponent?.content"
      [customClasses]="item | cSidebarNavIcon"
      [name]="item.iconComponent?.name"
    ></svg>
  }
  @if (!item?.icon && !item?.iconComponent) {
    <span [ngClass]="item | cSidebarNavIcon"></span>
  }
</ng-template>
